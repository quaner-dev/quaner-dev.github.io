<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <h1 id="优化-sqlite-性能">优化 SQLite 性能</h1> <h2 id="日志模式">日志模式</h2> <p>修改后 SQLite 不再直接随机写入到数据库文件中，而是先行顺序写入到预写式日志，并定期提交到数据库文件中。</p> <table> <thead> <tr> <th>Pragma</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>DELETE</td> <td>默认模式。在该模式下，在事务结束时，日志文件将被删除</td> </tr> <tr> <td>TRUNCATE</td> <td>日志文件被截断为零字节长度</td> </tr> <tr> <td>PERSIST</td> <td>日志文件被留在原地，但头部被重写，表明日志不再有效</td> </tr> <tr> <td>MEMORY</td> <td>日志记录保留在内存中，而不是磁盘上</td> </tr> <tr> <td>OFF</td> <td>不保留任何日志记录</td> </tr> </tbody> </table> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PRAGMA <span class="nv">journal_mode</span><span class="o">=</span>WAL<span class="p">;</span>
</code></pre></div></div> <h2 id="磁盘同步模式">磁盘同步模式</h2> <p>设定当前磁盘同步模式，该模式控制 SQLite 如何将数据写入物理磁盘</p> <table> <thead> <tr> <th>Pragma</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>0/OFF</td> <td>不进行同步</td> </tr> <tr> <td>1/NORMAL</td> <td>在关键的磁盘操作的每个序列后同步</td> </tr> <tr> <td>2/FULL</td> <td>在每个关键的磁盘操作后同步</td> </tr> </tbody> </table> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PRAGMA <span class="nv">synchronous</span><span class="o">=</span>NORMAL
</code></pre></div></div> </body></html>