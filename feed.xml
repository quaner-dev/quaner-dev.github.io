<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-cn"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://quaner-dev.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://quaner-dev.github.io/" rel="alternate" type="text/html" hreflang="zh-cn"/><updated>2026-02-11T05:22:59+00:00</updated><id>https://quaner-dev.github.io/feed.xml</id><title type="html">Quaner’s Blog</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">TimeShift备份系统</title><link href="https://quaner-dev.github.io/blog/2026/TimeShift%E5%A4%87%E4%BB%BD%E7%B3%BB%E7%BB%9F/" rel="alternate" type="text/html" title="TimeShift备份系统"/><published>2026-02-11T00:00:00+00:00</published><updated>2026-02-11T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2026/TimeShift%E5%A4%87%E4%BB%BD%E7%B3%BB%E7%BB%9F</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2026/TimeShift%E5%A4%87%E4%BB%BD%E7%B3%BB%E7%BB%9F/"><![CDATA[<h2 id="timeshift简介">TimeShift简介</h2> <p>TimeShift 是 Linux 上常用的系统快照工具，适合做系统层面的备份与还原。它更像 Windows 的系统还原点：主要保护系统文件、软件配置与关键目录，而不是用来做个人文 件的长期备份。默认情况下，用户目录通常会被排除在快照之外，你可以按需调整。</p> <p>适用场景：</p> <ul> <li>升级系统或安装驱动前做一次系统快照</li> <li>系统配置改动较大时做阶段性快照</li> <li>出现故障时快速回滚到可用状态</li> </ul> <h2 id="操作文档">操作文档</h2> <h3 id="安装-timeshift">安装 Timeshift</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>timeshift
</code></pre></div></div> <p>也可以从应用菜单直接打开，或在终端执行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>timeshift-gtk
</code></pre></div></div> <h3 id="首次启动配置向导">首次启动配置向导</h3> <p>首次打开会进入向导，按提示完成以下步骤。</p> <ol> <li> <p>选择快照类型（RSYNC 或 BTRFS）</p> <p><img src="/assets/img/post_img/2026-02-11-TimeShift备份系统/1.png" alt="选择快照类型"/></p> <ul> <li><strong>RSYNC</strong>：适用于绝大多数非 Btrfs 文件系统，通用性最好</li> <li><strong>BTRFS</strong>：仅适用于 Btrfs 文件系统，创建和回滚速度更快</li> </ul> </li> <li> <p>选择快照存储位置</p> <p><img src="/assets/img/post_img/2026-02-11-TimeShift备份系统/2.png" alt="选择快照存储位置"/></p> <p>建议放在独立分区或外接硬盘，避免系统盘损坏时快照不可用。</p> </li> <li> <p>设置快照计划任务</p> <p><img src="/assets/img/post_img/2026-02-11-TimeShift备份系统/3.png" alt="设置快照计划任务"/></p> <p>可按“每小时 / 每日 / 每周 / 每月”设定频率。个人桌面环境通常使用“每日 + 每周”即可。</p> </li> </ol> <h3 id="浏览与恢复快照">浏览与恢复快照</h3> <p>选中目标快照，点击“浏览”可查看变更内容；点击“恢复”可进行系统回滚。</p> <p><img src="/assets/img/post_img/2026-02-11-TimeShift备份系统/4.png" alt="浏览与恢复快照"/></p> <p>恢复前建议：</p> <ul> <li>关闭正在运行的重要应用</li> <li>确认快照来自系统稳定状态</li> <li>如果是关键系统盘，建议先备份用户重要数据</li> </ul> <h3 id="清理与维护">清理与维护</h3> <p>定期清理旧快照可以释放空间，也能降低恢复时的选择成本。</p> <p><img src="/assets/img/post_img/2026-02-11-TimeShift备份系统/4.png" alt="清理旧快照"/></p> <h3 id="恢复完成后的检查">恢复完成后的检查</h3> <p>恢复完成后可重启系统，并检查以下内容：</p> <ul> <li>系统服务是否正常启动</li> <li>关键软件是否可用</li> <li>网络与驱动是否正常</li> </ul>]]></content><author><name></name></author><category term="Backup"/><category term="timeshift"/><summary type="html"><![CDATA[TimeShift简介]]></summary></entry><entry><title type="html">Ubuntu开启RDP</title><link href="https://quaner-dev.github.io/blog/2026/Ubuntu%E5%BC%80%E5%90%AFRDP/" rel="alternate" type="text/html" title="Ubuntu开启RDP"/><published>2026-02-11T00:00:00+00:00</published><updated>2026-02-11T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2026/Ubuntu%E5%BC%80%E5%90%AFRDP</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2026/Ubuntu%E5%BC%80%E5%90%AFRDP/"><![CDATA[<h2 id="ubuntu-rdp简介">Ubuntu RDP简介</h2> <p>RDP 是远程桌面协议，可让你在其他设备上图形化登录 Ubuntu 桌面。本文基于 Ubuntu 自带的远程登录功能进行配置，适合局域网或可信网络使用。</p> <h2 id="rdp配置">RDP配置</h2> <p>进入 <code class="language-plaintext highlighter-rouge">Settings</code> -&gt; <code class="language-plaintext highlighter-rouge">System</code> -&gt; <code class="language-plaintext highlighter-rouge">Remote Desktop</code>，开启远程桌面入口。</p> <p><img src="/assets/img/post_img/2026-02-11-Ubuntu开启RDP/1.png" alt="RDP选项"/></p> <h2 id="remote-login配置">Remote Login配置</h2> <p>在 Remote Login 页面完成以下步骤。</p> <ol> <li> <p>选择 Remote Login 选项。</p> <p><img src="/assets/img/post_img/2026-02-11-Ubuntu开启RDP/2.png" alt="Desktop Sharing"/></p> </li> <li> <p>点击 Unlock，输入密码解锁配置权限。</p> <p><img src="/assets/img/post_img/2026-02-11-Ubuntu开启RDP/3.png" alt="Desktop Sharing"/></p> </li> <li> <p>开启 Remote Login，并在 Login Details 中设置密码。</p> <p><img src="/assets/img/post_img/2026-02-11-Ubuntu开启RDP/4.png" alt="Desktop Sharing"/></p> </li> </ol> <h2 id="连接说明">连接说明</h2> <p>在远程设备上使用 RDP 客户端连接 Ubuntu 的 IP 地址，账号为 Ubuntu 用户名， 密码为上一步设置的 Remote Login 密码。</p>]]></content><author><name></name></author><category term="Ubuntu"/><category term="RDP"/><summary type="html"><![CDATA[Ubuntu RDP简介]]></summary></entry><entry><title type="html">al-folio 操作汇总</title><link href="https://quaner-dev.github.io/blog/2026/Al-Folio%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/" rel="alternate" type="text/html" title="al-folio 操作汇总"/><published>2026-02-08T00:00:00+00:00</published><updated>2026-02-08T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2026/Al-Folio%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2026/Al-Folio%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/"><![CDATA[<h2 id="更新al-folio版本">更新al-folio版本</h2> <h3 id="版本差距较小">版本差距较小</h3> <p>使用rebase进行修改，适合改动少、上游差距不大时使用</p> <ol> <li> <p>rebase分析版本</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch upstream
git checkout main
git rebase 0.16.3
</code></pre></div> </div> </li> <li> <p>修改冲突内容后，进行提交</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add <span class="nb">.</span>
git commit <span class="nt">-a</span> <span class="nt">-m</span> <span class="s1">'xxx'</span>
</code></pre></div> </div> </li> </ol> <h3 id="版本差距较大">版本差距较大</h3> <p>当冲突过多、版本相差较大时，直接重建分支并迁移内容性价比较高，因为冲突过多的时候直接推倒重建反而代价更小</p> <h4 id="步骤">步骤</h4> <ol> <li> <p>新建干净分支（基于上游最新版）</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="nt">-b</span> fresh-upstream upstream/main
</code></pre></div> </div> </li> <li>从旧仓库迁移文件 <ul> <li><code class="language-plaintext highlighter-rouge">_data/socials.yml</code> 社交媒体配置</li> <li><code class="language-plaintext highlighter-rouge">_data/repositories.yml</code> github的库信息</li> <li><code class="language-plaintext highlighter-rouge">_drafts</code> 草稿文件</li> <li><code class="language-plaintext highlighter-rouge">_pages/about.md</code> 个人简介</li> <li><code class="language-plaintext highlighter-rouge">_pages/cv.md</code> 个人简历模板，当使用resume.json作为cv的参考时，需要将cv_format的配置从rendercv改到jsonresume</li> <li><code class="language-plaintext highlighter-rouge">_posts/</code> 个人博客文件</li> <li><code class="language-plaintext highlighter-rouge">assets/img/</code> 头像（prof_pic.png）、二维码（wechat-qr.png）、文章图（post_img）、收藏夹图标（favicon.png）</li> <li><code class="language-plaintext highlighter-rouge">assets/json/resume.json</code> 个人简历配置</li> <li><code class="language-plaintext highlighter-rouge">_config.yml</code> 博客整体配置文件，这里只合并个人字段，不要整文件覆盖</li> </ul> </li> <li> <p>除非涉及到深度定制，或者有其他定制需求，否则其余文件不要迁移</p> </li> <li>本地启动检查页面和链接 <code class="language-plaintext highlighter-rouge">docker compose up -d</code></li> </ol> <h2 id="异常排查记录">异常排查记录</h2> <h3 id="排查-socials-中-wechat-qr-报错">排查 socials 中 wechat-qr 报错</h3> <h4 id="现象">现象</h4> <p>启动时在渲染 <code class="language-plaintext highlighter-rouge">about</code> 页面报错：</p> <pre><code class="language-log">Liquid Exception: undefined method `split` for nil
</code></pre> <h4 id="原因">原因</h4> <p><code class="language-plaintext highlighter-rouge">_data/socials.yml</code> 中的 <code class="language-plaintext highlighter-rouge">wechat_qr</code> 不是 <code class="language-plaintext highlighter-rouge">jekyll-socials</code> 识别的标准字段，会被当作自定义社交项，但值只是字符串（非 <code class="language-plaintext highlighter-rouge">logo/title/url</code> 结构），导致插件尝试解析 <code class="language-plaintext highlighter-rouge">logo</code> 时崩溃。</p> <h4 id="解决方案">解决方案</h4> <ol> <li>直接注释 <code class="language-plaintext highlighter-rouge">wechat_qr</code>项，使其在search.liquid.js中走相关逻辑，防止``逻辑中出现异常 <img src="/assets/img/post_img/2026-02-08-Al-Folio操作汇总操作汇总/1.png" alt="异常代码"/></li> <li>使用custom_social的方式来自定义WeChat社交项 <img src="/assets/img/post_img/2026-02-08-Al-Folio操作汇总操作汇总/2.png" alt="编写示例"/></li> </ol> <h3 id="custom_social-的-logo-必须是网络地址">custom_social 的 logo 必须是网络地址</h3> <p><code class="language-plaintext highlighter-rouge">custom_social</code> 中的 <code class="language-plaintext highlighter-rouge">logo</code> 使用本地路径时会触发插件内部 <code class="language-plaintext highlighter-rouge">relative_url</code> 报错。建议使用完整的 <code class="language-plaintext highlighter-rouge">https</code> URL。</p> <h3 id="配置-cv-的正确方式">配置 CV 的正确方式</h3> <p>在 al-folio 0.16.3版本中，简历内容主要在 <code class="language-plaintext highlighter-rouge">_data/cv.yml</code> 中维护，<code class="language-plaintext highlighter-rouge">_pages/cv.md</code> 只是渲染入口。 如果升级后 CV 显示异常，优先检查：</p> <ul> <li><code class="language-plaintext highlighter-rouge">_data/cv.yml</code> 是否符合新版结构</li> <li><code class="language-plaintext highlighter-rouge">_pages/cv.md</code> 是否引用了正确的 layout / 数据源</li> </ul>]]></content><author><name></name></author><category term="Jekyll"/><category term="Themes"/><category term="al-folio"/><summary type="html"><![CDATA[更新al-folio版本]]></summary></entry><entry><title type="html">OpenClaw 部署文档</title><link href="https://quaner-dev.github.io/blog/2026/OpenClaw%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/" rel="alternate" type="text/html" title="OpenClaw 部署文档"/><published>2026-02-06T00:00:00+00:00</published><updated>2026-02-06T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2026/OpenClaw%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2026/OpenClaw%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/"><![CDATA[<h2 id="openclaw基础信息">OpenClaw基础信息</h2> <ul> <li><a href="https://openclaw.ai/">OpenClaw官网</a></li> <li><a href="https://docs.openclaw.ai/getting-started">OpenClaw英文网址</a></li> <li><a href="https://docs.openclaw.ai/zh-CN">OpenClaw中文网址</a></li> <li><a href="https://github.com/openclaw/openclaw">OpenClaw Github地址</a></li> </ul> <h2 id="架构描述">架构描述</h2> <p>OpenClaw的核心架构为Gateway，通过Gateway承接Web、CLI等客户端的请求，向上对接例如飞书、Whats App等工具，实现AI智能体的相关功能</p> <p><img src="/assets/img/post_img/2026-02-06-OpenClaw部署文档/1.png" alt="OpenClaw架构图"/></p> <h2 id="部署安装">部署安装</h2> <h3 id="通过cli部署">通过CLI部署</h3> <p>此安装方式为交互式安装，可以根据需要对安装内容进行点选</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> https://openclaw.ai/install.sh | bash
</code></pre></div></div> <h2 id="通过docker部署">通过Docker部署</h2> <h3 id="下载openclaw原代码">下载OpenClaw原代码</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/openclaw/openclaw.git
</code></pre></div></div> <h3 id="修改docker-compose文件">修改Docker Compose文件</h3> <ol> <li> <p>构建Docker镜像</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> openclaw:local <span class="nt">-f</span> Dockerfile <span class="nb">.</span>
</code></pre></div> </div> </li> <li> <p>编辑docker-compose.yml</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim docker-compose.yml
</code></pre></div> </div> </li> <li> <p>编辑相应参数</p> <p>在yml的文件中使用${xxx}的参数，可以通过在系统中设定环境变量的方式进行修改，也可以通过编辑yml来进行修改</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">openclaw-gateway</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">${OPENCLAW_IMAGE:-openclaw:local}</span> <span class="c1"># 镜像ID</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">HOME</span><span class="pi">:</span> <span class="s">/home/node</span>
      <span class="na">TERM</span><span class="pi">:</span> <span class="s">xterm-256color</span>
      <span class="na">OPENCLAW_GATEWAY_TOKEN</span><span class="pi">:</span> <span class="s">${OPENCLAW_GATEWAY_TOKEN}</span> <span class="c1"># 设定的Token</span>
      <span class="na">CLAUDE_AI_SESSION_KEY</span><span class="pi">:</span> <span class="s">${CLAUDE_AI_SESSION_KEY}</span>
      <span class="na">CLAUDE_WEB_SESSION_KEY</span><span class="pi">:</span> <span class="s">${CLAUDE_WEB_SESSION_KEY}</span>
      <span class="na">CLAUDE_WEB_COOKIE</span><span class="pi">:</span> <span class="s">${CLAUDE_WEB_COOKIE}</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw</span> <span class="c1"># 在.openclaw中配置openclaw.json</span>
      <span class="pi">-</span> <span class="s">${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">${OPENCLAW_GATEWAY_PORT:-18789}:18789"</span> <span class="c1"># 设定Web端口</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">${OPENCLAW_BRIDGE_PORT:-18790}:18790"</span>
    <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">node"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">dist/index.js"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">gateway"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">--bind"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">${OPENCLAW_GATEWAY_BIND:-lan}"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">--port"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">18789"</span><span class="pi">]</span>

  <span class="na">openclaw-cli</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">${OPENCLAW_IMAGE:-openclaw:local}</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">HOME</span><span class="pi">:</span> <span class="s">/home/node</span>
      <span class="na">TERM</span><span class="pi">:</span> <span class="s">xterm-256color</span>
      <span class="na">OPENCLAW_GATEWAY_TOKEN</span><span class="pi">:</span> <span class="s">${OPENCLAW_GATEWAY_TOKEN}</span>
      <span class="na">BROWSER</span><span class="pi">:</span> <span class="s">echo</span>
      <span class="na">CLAUDE_AI_SESSION_KEY</span><span class="pi">:</span> <span class="s">${CLAUDE_AI_SESSION_KEY}</span>
      <span class="na">CLAUDE_WEB_SESSION_KEY</span><span class="pi">:</span> <span class="s">${CLAUDE_WEB_SESSION_KEY}</span>
      <span class="na">CLAUDE_WEB_COOKIE</span><span class="pi">:</span> <span class="s">${CLAUDE_WEB_COOKIE}</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw</span>
      <span class="pi">-</span> <span class="s">${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace</span>
    <span class="na">stdin_open</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">tty</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">entrypoint</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">node"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">dist/index.js"</span><span class="pi">]</span>
</code></pre></div> </div> </li> <li> <p>启动容器</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker compose run <span class="nt">--rm</span> openclaw-cli onboard
docker compose up <span class="nt">-d</span> openclaw-gateway
</code></pre></div> </div> </li> </ol> <h2 id="访问页面">访问页面</h2> <p>页面地址为<code class="language-plaintext highlighter-rouge">http://xx.xx.xx.xx:18789?token=xxx</code></p>]]></content><author><name></name></author><category term="AI"/><category term="OpenClaw"/><summary type="html"><![CDATA[OpenClaw基础信息]]></summary></entry><entry><title type="html">SQLite Vacuum</title><link href="https://quaner-dev.github.io/blog/2025/SQLite-Vacuum/" rel="alternate" type="text/html" title="SQLite Vacuum"/><published>2025-11-06T00:00:00+00:00</published><updated>2025-11-06T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/SQLite%20Vacuum</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/SQLite-Vacuum/"><![CDATA[<h2 id="空闲页概念">空闲页概念</h2> <p>在SQLite中数据库即是文件，也即.sqlite或.db就是整个数据库，文件由固定大小的页组成，默认是4KB，当使用增删改操作时，原本存储在页中的就会数据就会空出来，这也页就是空闲页，但是SQLite不会立刻将空闲页的磁盘空间释放出来，而是将其标记为可重用，当有新的数据来时，就可以使用这些空白页</p> <h2 id="vacuum与空闲页的关系">VACUUM与空闲页的关系</h2> <p>VACUUM的作用就是数据库重整和垃圾回收的过程，流程如下</p> <ol> <li>创建新数据库：VACUUM会创建一个新的、临时的、空的数据库文件</li> <li>复制有效数据到新数据库中：复制有效数据到新数据库中，对于空闲页会直接跳过</li> <li>重建索引：在新数据库中，会将索引重建，用于提高检索效率</li> <li>替换旧数据库：SQLite用新数据库原子性的替换旧数据库</li> <li>释放空间：旧数据库文件被删除，释放空闲页占用的磁盘空间</li> </ol> <h2 id="手动vacuum">手动VACUUM</h2> <ol> <li> <p>在SQLite命令中使VACUUM</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">VACUUM</span><span class="p">;</span>
</code></pre></div> </div> </li> <li> <p>在特定表中使用VACUUM</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">VACUUM</span> <span class="k">table_name</span><span class="p">;</span>
</code></pre></div> </div> </li> </ol> <h2 id="自动vacuumauto-vacuum">自动VACUUM（Auto-VACUUM）</h2> <p>自动VACUUM和手动VACUUM不相同，Auto-VACUUM可以将空闲页移到数据库末尾，从而减小数据库文件大小</p>]]></content><author><name></name></author><category term="Database"/><category term="SQLite"/><summary type="html"><![CDATA[空闲页概念]]></summary></entry><entry><title type="html">SNAT和DNAT</title><link href="https://quaner-dev.github.io/blog/2025/SNAT%E5%92%8CDNAT/" rel="alternate" type="text/html" title="SNAT和DNAT"/><published>2025-11-01T00:00:00+00:00</published><updated>2025-11-01T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/SNAT%E5%92%8CDNAT</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/SNAT%E5%92%8CDNAT/"><![CDATA[<h2 id="nat介绍">NAT介绍</h2> <p>NAT网络地址转换（Network Address Translation）是一种常见的网络技术，主要用于私有网络和公共网络之间通信。</p> <h2 id="dnat">DNAT</h2> <h3 id="dnat介绍">DNAT介绍</h3> <p>DNAT目标地址转换（Destination Network Address Translation）是NAT的一种形式，主要将外部网络的目标IP地址转换为内部网络中的IP地址</p> <h3 id="dnat示例">DNAT示例</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> PREROUTING <span class="nt">-i</span> eth0 <span class="nt">-p</span> tcp <span class="nt">--dport</span> 80 <span class="nt">-j</span> DNAT <span class="nt">--to-destination</span> 192.168.1.100:80
</code></pre></div></div> <h2 id="snat">SNAT</h2> <h3 id="snat介绍">SNAT介绍</h3> <p>SNAT原网络地址转换（Source Network Address Translation）是NAT的一种形式，主要将内部网络的源IP地址转换为外部网络中的IP地址</p> <h3 id="snat示例">SNAT示例</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> POSTROUTING <span class="nt">-o</span> eth0 <span class="nt">-s</span> 192.168.1.0/24 <span class="nt">-j</span> SNAT <span class="nt">--to-source</span> 203.0.113.10
</code></pre></div></div> <h2 id="kubernetes网络问题分析">Kubernetes网络问题分析</h2> <h3 id="问题现象">问题现象</h3> <p>Pod访问外部服务时，在宿主机抓包发现同一请求出现两次：</p> <ul> <li>Pod IP (100.64.25.264) → 外部服务</li> <li>节点 IP (xx.xx.22.38) → 外部服务</li> </ul> <p>时间戳显示两次请求间隔32微秒，响应也有对应的两次。</p> <h3 id="排查过程">排查过程</h3> <ol> <li>确认100.64.x.x为Pod IP，非Service IP</li> <li>检查应用层无重复请求逻辑</li> <li>排除负载均衡和Ingress转发问题</li> <li>分析iptables规则发现SNAT配置</li> </ol> <p><img src="/assets/img/post_img/2025-11-01-SNAT和DNAT/1.png" alt="Iptable命令返回结果"/></p> <h3 id="根本原因">根本原因</h3> <p>Kubernetes SNAT机制导致</p> <p>Pod访问外部服务时自动触发源地址转换，原始请求（Pod IP）经SNAT转为节点IP，宿主机抓包能看到NAT前后的两个数据包，32微秒延迟为SNAT处理时间，属正常范围</p> <h3 id="结论">结论</h3> <p>此为Kubernetes网络正常行为，并非故障，SNAT确保外部服务流量能正确返回到集群内部</p>]]></content><author><name></name></author><category term="Network"/><category term="NAT"/><summary type="html"><![CDATA[NAT介绍]]></summary></entry><entry><title type="html">Clickhouse Drop表过大异常</title><link href="https://quaner-dev.github.io/blog/2025/Clickhouse-Drop%E8%A1%A8%E8%BF%87%E5%A4%A7%E5%BC%82%E5%B8%B8/" rel="alternate" type="text/html" title="Clickhouse Drop表过大异常"/><published>2025-10-27T00:00:00+00:00</published><updated>2025-10-27T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Clickhouse%20Drop%E8%A1%A8%E8%BF%87%E5%A4%A7%E5%BC%82%E5%B8%B8</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Clickhouse-Drop%E8%A1%A8%E8%BF%87%E5%A4%A7%E5%BC%82%E5%B8%B8/"><![CDATA[<h2 id="异常情况">异常情况</h2> <p>CK日志显示Drop表失败，数据量超出允许删除大小</p> <pre><code class="language-log">Size (58.45 GB) is greater than max_[table/partition]_size_to_drop (50.00 GB) 2. File '/var/lib/clickhouse/flags/force_drop_table' intended to force DROP doesn't exist How to fix this:

Either increase (or set to zero) max_[table/partition]_size_to_drop in server config
Either pass a bigger (or set to zero) max_[table/partition]_size_to_drop through query settings
Either create forcing file /var/lib/clickhouse/flags/force_drop_table and make sure that ClickHouse has write permission for it. Example: sudo touch '/var/lib/clickhouse/flags/force_drop_table' &amp;&amp; sudo chmod 666 '/var/lib/clickhouse/flags/force_drop_table'.
</code></pre> <h2 id="原因">原因</h2> <p>默认情况下CK的<code class="language-plaintext highlighter-rouge">max_table_size_to_drop</code>为50G，超出50G的表会要求修改配置，或手动创建flag文件用于删除表</p> <h2 id="解决方法">解决方法</h2> <h3 id="方法一">方法一</h3> <p>临时解决方法，增加临时flag文件，用于Drop操作</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo touch</span> <span class="s1">'/var/lib/clickhouse/flags/force drop table &amp;&amp; sudo chmod 666 '</span>/var/lib/clickhouse/flags/foorce_drop_table
</code></pre></div></div> <h3 id="方法二">方法二</h3> <p>长期解决方法。修改配置文件，增大或取消限制</p> <p>由于max_table_size_to_drop是全局配置，因此可以放在所有可以配置全局变量的配置文件中，这里仅仅给出config.xml的配置方法</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/clickhouse-server/config.xml
</code></pre></div></div> <p>在config.xml中增加配置</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;max_table_size_to_drop&gt;</span>0<span class="nt">&lt;/max_table_size_to_drop&gt;</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="Middleware"/><category term="Clickhouse"/><summary type="html"><![CDATA[异常情况]]></summary></entry><entry><title type="html">Jmeter使用指南</title><link href="https://quaner-dev.github.io/blog/2025/Jmeter%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" rel="alternate" type="text/html" title="Jmeter使用指南"/><published>2025-10-24T00:00:00+00:00</published><updated>2025-10-24T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Jmeter%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Jmeter%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"><![CDATA[<h2 id="下载jmeter">下载Jmeter</h2> <ol> <li><a href="https://jmeter.apache.org/">Jmeter官网</a></li> <li><a href="https://jmeter.apache.org/download_jmeter.cgi">Download Release</a></li> <li><a href="https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.6.3.tgz">Apache JMeter 5.6.3 (Requires Java 8+)</a></li> </ol> <h2 id="win使用jmeter">Win使用Jmeter</h2> <p>解压下载的安装包后，进入apache-jmeter-5.6.3/bin中，点击jmeter.bat即可打开Jmeter软件。</p> <p><img src="/assets/img/post_img/2025-10-24-Jmeter使用指南/1.png" alt="Jmeter软件首页"/></p> <h2 id="使用方法">使用方法</h2> <h3 id="thread-group">Thread Group</h3> <p><img src="/assets/img/post_img/2025-10-24-Jmeter使用指南/2.png" alt="Thread Group"/></p> <h4 id="增加thread-group">增加Thread Group</h4> <p>在Test Plan选项中右击，依次选择Add - Threads(Users) - Thread Group</p> <h4 id="修改thread-group参数">修改Thread Group参数</h4> <table> <thead> <tr> <th>参数</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>Name</td> <td>名称</td> </tr> <tr> <td>Comments</td> <td>注释</td> </tr> <tr> <td>Number of Theads (users)</td> <td>线程数</td> </tr> <tr> <td>Ramp-up period (seconds)</td> <td>线程启动时间</td> </tr> <tr> <td>Loop Count</td> <td>循环次数，Infinite为无限循环</td> </tr> </tbody> </table> <h3 id="http-request">HTTP Request</h3> <p><img src="/assets/img/post_img/2025-10-24-Jmeter使用指南/3.png" alt="HTTP Request"/></p> <h4 id="增加http-request">增加HTTP Request</h4> <p>在Thread Group选项中右击，依次选择Add - Sampler - HTTP Request</p> <h4 id="修改http-request参数">修改HTTP Request参数</h4> <p>可以根据Postman中对应进行填写</p> <h3 id="http-header-manager">HTTP Header Manager</h3> <h4 id="新增http-header-manager">新增HTTP Header Manager</h4> <p>在Thread Group选项中右击，依次选择Add - Config Element - HTTP Header Manager</p> <h4 id="修改http-header-manager参数">修改HTTP Header Manager参数</h4> <p>可以根据Postman中对应进行填写</p> <h3 id="view-result-tree">View Result Tree</h3> <p><img src="/assets/img/post_img/2025-10-24-Jmeter使用指南/4.png" alt="View Result Tree"/></p> <h3 id="summary-report">Summary Report</h3> <h4 id="参数描述">参数描述</h4> <table> <thead> <tr> <th>参数</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>Label</td> <td>采样器</td> </tr> <tr> <td>Samples</td> <td>完成的请求总数</td> </tr> <tr> <td>Average</td> <td>平均响应时间（毫秒）</td> </tr> <tr> <td>Min</td> <td>最小响应时间（毫秒）</td> </tr> <tr> <td>Max</td> <td>最大响应时间</td> </tr> <tr> <td>Std. Dev.</td> <td>响应时间的标准偏差</td> </tr> <tr> <td>Error %</td> <td>请求的错误率</td> </tr> <tr> <td>Throughput</td> <td>吞吐量</td> </tr> <tr> <td>Received KB/sec</td> <td>接收数据的吞吐量</td> </tr> <tr> <td>Sent KB/sec</td> <td>发送数据的吞吐量</td> </tr> <tr> <td>Avg. Bytes</td> <td>平均响应数据大小</td> </tr> </tbody> </table> <h2 id="linux使用jmeter">Linux使用Jmeter</h2> <h3 id="命令解释">命令解释</h3> <table> <thead> <tr> <th>参数</th> <th>解释</th> </tr> </thead> <tbody> <tr> <td>-n</td> <td>指定Jmeter以非图形化模式运行</td> </tr> <tr> <td>-t</td> <td>指定Jmeter需要运行的测试计划jmx文件</td> </tr> <tr> <td>-l</td> <td>保存原始测试结果jtl文件路径</td> </tr> <tr> <td>-e</td> <td>测试结束后生成报告，需与-l一同使用</td> </tr> <tr> <td>-o</td> <td>存放Jmeter生成的html仪表板报告，必须与-e一同使用</td> </tr> </tbody> </table> <h3 id="示例">示例</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jmeter <span class="nt">-n</span> <span class="nt">-t</span> xxx.jmx <span class="nt">-l</span> xxx/result_<span class="si">$(</span><span class="nb">date</span> +%Y%m%d_%H%M%S<span class="si">)</span>.jtl <span class="nt">-e</span> <span class="nt">-o</span> xxx/report_<span class="si">$(</span><span class="nb">date</span> +%Y%m%d_%H%M%S<span class="si">)</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="Jmeter"/><category term="Jmeter"/><summary type="html"><![CDATA[下载Jmeter]]></summary></entry><entry><title type="html">Excel导入图片URL并显示图片</title><link href="https://quaner-dev.github.io/blog/2025/Excel%E5%AF%BC%E5%85%A5%E5%9B%BE%E7%89%87URL%E5%B9%B6%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/" rel="alternate" type="text/html" title="Excel导入图片URL并显示图片"/><published>2025-10-21T00:00:00+00:00</published><updated>2025-10-21T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Excel%E5%AF%BC%E5%85%A5%E5%9B%BE%E7%89%87URL%E5%B9%B6%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Excel%E5%AF%BC%E5%85%A5%E5%9B%BE%E7%89%87URL%E5%B9%B6%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/"><![CDATA[<h2 id="整理图片url">整理图片URL</h2> <p>将图片URL整理为如下格式，其中xxx使用真实图片URL替代，图片大小根据excel实际大小手动调整</p> <pre><code class="language-txt">&lt;table&gt;&lt;img src="xxx" height=50 width=50&gt;&lt;/table&gt;
&lt;table&gt;&lt;img src="xxx" height=50 width=50&gt;&lt;/table&gt;
&lt;table&gt;&lt;img src="xxx" height=50 width=50&gt;&lt;/table&gt;
</code></pre> <h2 id="导入excel">导入Excel</h2> <p>将上述整理好的数据直接粘贴到excel中，excel会自动下载并显示图片</p>]]></content><author><name></name></author><category term="Excel"/><category term="Excel"/><summary type="html"><![CDATA[整理图片URL]]></summary></entry><entry><title type="html">Shell命令汇总</title><link href="https://quaner-dev.github.io/blog/2025/Shell%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/" rel="alternate" type="text/html" title="Shell命令汇总"/><published>2025-10-16T00:00:00+00:00</published><updated>2025-10-16T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Shell%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Shell%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/"><![CDATA[<h2 id="date">Date</h2> <h3 id="显示时间">显示时间</h3> <p>直接显示当前时间</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">date</span>
</code></pre></div></div> <h3 id="格式化显示时间">格式化显示时间</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">date</span> +<span class="s1">'%Y-%m-%d %H:%M:%S'</span> <span class="c"># 2025-10-16 11:31:33</span>
</code></pre></div></div> <h3 id="设定时间">设定时间</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">date </span>20251016
</code></pre></div></div> <h3 id="显示时间戳">显示时间戳</h3> <h4 id="显示当前时间戳">显示当前时间戳</h4> <p>输出秒级时间戳，如需使用毫秒级，则乘1000</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">date</span> +%s
</code></pre></div></div> <h4 id="转换特定时间时间戳">转换特定时间时间戳</h4> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">date</span> <span class="nt">-d</span> <span class="s2">"2025-10-16 11:31:33"</span> +%s
</code></pre></div></div> <h2 id="find">Find</h2> <h3 id="todo">TODO</h3>]]></content><author><name></name></author><category term="Shell"/><category term="Date"/><summary type="html"><![CDATA[Date]]></summary></entry></feed>