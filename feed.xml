<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-cn"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://quaner-dev.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://quaner-dev.github.io/" rel="alternate" type="text/html" hreflang="zh-cn"/><updated>2025-10-11T11:34:39+00:00</updated><id>https://quaner-dev.github.io/feed.xml</id><title type="html">Quaner’s Blog</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Clickhouse 备份恢复</title><link href="https://quaner-dev.github.io/blog/2025/Clickhouse%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D-TODO/" rel="alternate" type="text/html" title="Clickhouse 备份恢复"/><published>2025-09-26T00:00:00+00:00</published><updated>2025-09-26T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Clickhouse%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%20TODO</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Clickhouse%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D-TODO/"><![CDATA[<h1 id="clickhouse-备份恢复-todo">Clickhouse 备份恢复 TODO</h1> <h2 id="todo">TODO</h2>]]></content><author><name></name></author><category term="Database"/><category term="Clickhouse"/><category term="Backup"/><category term="Recovery"/><summary type="html"><![CDATA[Clickhouse 备份恢复 TODO]]></summary></entry><entry><title type="html">Minio Client 命令</title><link href="https://quaner-dev.github.io/blog/2025/Minio-Client%E5%91%BD%E4%BB%A4/" rel="alternate" type="text/html" title="Minio Client 命令"/><published>2025-09-15T00:00:00+00:00</published><updated>2025-09-15T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Minio%20Client%E5%91%BD%E4%BB%A4</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Minio-Client%E5%91%BD%E4%BB%A4/"><![CDATA[<h2 id="下载并安装-mc">下载并安装 mc</h2> <p>使用如下命令下载安装包，并安装</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.min.io/client/mc/release/linux-amd64/mc
<span class="nb">chmod</span> +x mc
./mc <span class="nt">--help</span>
</code></pre></div></div> <h2 id="bucket-操作">Bucket 操作</h2> <h3 id="查看-bucket-列表">查看 Bucket 列表</h3> <p><code class="language-plaintext highlighter-rouge">mc ls</code></p> <h3 id="查看-bucket-下文件或文件夹">查看 Bucket 下文件或文件夹</h3> <p><code class="language-plaintext highlighter-rouge">mc ls local/hit</code></p> <h3 id="创建-bucket">创建 Bucket</h3> <p><code class="language-plaintext highlighter-rouge">mc mb local/hit</code></p> <h3 id="删除-bucket">删除 Bucket</h3> <p><code class="language-plaintext highlighter-rouge">mc rm local/hit/hit/2025/01</code></p>]]></content><author><name></name></author><category term="Minio"/><category term="Minio"/><category term="mc"/><summary type="html"><![CDATA[下载并安装 mc]]></summary></entry><entry><title type="html">Foxmail 添加 Gmail</title><link href="https://quaner-dev.github.io/blog/2025/Foxmail%E6%B7%BB%E5%8A%A0Gmail/" rel="alternate" type="text/html" title="Foxmail 添加 Gmail"/><published>2025-08-25T00:00:00+00:00</published><updated>2025-08-25T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Foxmail%E6%B7%BB%E5%8A%A0Gmail</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Foxmail%E6%B7%BB%E5%8A%A0Gmail/"><![CDATA[<h2 id="原因">原因</h2> <p>Google 并不支持使用账号密码直接登录不太安全的第三方软件</p> <h2 id="解决步骤">解决步骤</h2> <ol> <li> <p>开启两步验证 登录 Google 账号后，点击 Google 账号中右上角的<code class="language-plaintext highlighter-rouge">管理您的Google账号</code>，点击左侧安全性，开启两步验证</p> </li> <li> <p>生成专用密码 进入<code class="language-plaintext highlighter-rouge">https://myaccount.google.com/apppasswords</code>中生成专用密码</p> </li> <li> <p>使用专用密码登录 在 Foxmail 中点击其他邮箱，并使用专用密码登录</p> </li> </ol>]]></content><author><name></name></author><category term="Mail"/><category term="Gmail"/><summary type="html"><![CDATA[原因]]></summary></entry><entry><title type="html">Dockerignore 介绍</title><link href="https://quaner-dev.github.io/blog/2025/Dockerignore%E4%BB%8B%E7%BB%8D/" rel="alternate" type="text/html" title="Dockerignore 介绍"/><published>2025-08-04T00:00:00+00:00</published><updated>2025-08-04T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Dockerignore%E4%BB%8B%E7%BB%8D</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Dockerignore%E4%BB%8B%E7%BB%8D/"><![CDATA[<h2 id="简介">简介</h2> <p>你可以使用<code class="language-plaintext highlighter-rouge">.dockerignore</code>文件从构建中排除某些文件或文件夹</p> <h2 id="文件名和路径">文件名和路径</h2> <p>当运行<code class="language-plaintext highlighter-rouge">build</code>命令时，构建客户端会在 root 目录中寻找名为<code class="language-plaintext highlighter-rouge">.dockerignore</code>的文件。如果文件存在，被匹配到的文件和文件夹都会被移除在构建上下文中</p> <h2 id="官方文档地址">官方文档地址</h2> <p><code class="language-plaintext highlighter-rouge">https://docs.docker.com/build/concepts/context/#dockerignore-files</code></p>]]></content><author><name></name></author><category term="Docker"/><category term="Dockerignore"/><summary type="html"><![CDATA[简介]]></summary></entry><entry><title type="html">部署 K8S</title><link href="https://quaner-dev.github.io/blog/2025/%E9%83%A8%E7%BD%B2K8S/" rel="alternate" type="text/html" title="部署 K8S"/><published>2025-07-10T00:00:00+00:00</published><updated>2025-07-10T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/%E9%83%A8%E7%BD%B2K8S</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/%E9%83%A8%E7%BD%B2K8S/"><![CDATA[<h2 id="用-curl-在-linux-系统中安装-kubectl">用 curl 在 Linux 系统中安装 kubectl</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-LO</span> <span class="s2">"https://dl.k8s.io/release/</span><span class="si">$(</span>curl <span class="nt">-L</span> <span class="nt">-s</span> https://dl.k8s.io/release/stable.txt<span class="si">)</span><span class="s2">/bin/linux/amd64/kubectl"</span>
</code></pre></div></div> <h3 id="说明">说明</h3> <ol> <li>可以替换 url 中的 amd64 为 arm64，用于下载 arm 版本 kubectl</li> <li>替换<code class="language-plaintext highlighter-rouge">$(curl -L -s https://dl.k8s.io/release/stable.txt)</code>为特定版本后，用于下载特定版本 kubectl</li> </ol> <h2 id="安装-kubectl">安装 kubectl</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo install</span> <span class="nt">-o</span> root <span class="nt">-g</span> root <span class="nt">-m</span> 0755 kubectl /usr/local/bin/kubectl
</code></pre></div></div> <h2 id="确认-kubectl-版本">确认 kubectl 版本</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl version <span class="nt">--client</span>
</code></pre></div></div> <h2 id="部署-helm">部署 helm</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> <span class="nt">-o</span> get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
<span class="nb">chmod </span>700 get_helm.sh
./get_helm.sh
</code></pre></div></div>]]></content><author><name></name></author><category term="K8S"/><category term="Kubenetes"/><category term="Kubectl"/><summary type="html"><![CDATA[用 curl 在 Linux 系统中安装 kubectl]]></summary></entry><entry><title type="html">优化 SQLite 性能</title><link href="https://quaner-dev.github.io/blog/2025/%E4%BC%98%E5%8C%96SQLite%E6%80%A7%E8%83%BD/" rel="alternate" type="text/html" title="优化 SQLite 性能"/><published>2025-06-15T00:00:00+00:00</published><updated>2025-06-15T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/%E4%BC%98%E5%8C%96SQLite%E6%80%A7%E8%83%BD</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/%E4%BC%98%E5%8C%96SQLite%E6%80%A7%E8%83%BD/"><![CDATA[<h2 id="日志模式">日志模式</h2> <p>修改后 SQLite 不再直接随机写入到数据库文件中，而是先行顺序写入到预写式日志，并定期提交到数据库文件中。</p> <table> <thead> <tr> <th>Pragma</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>DELETE</td> <td>默认模式。在该模式下，在事务结束时，日志文件将被删除</td> </tr> <tr> <td>TRUNCATE</td> <td>日志文件被截断为零字节长度</td> </tr> <tr> <td>PERSIST</td> <td>日志文件被留在原地，但头部被重写，表明日志不再有效</td> </tr> <tr> <td>MEMORY</td> <td>日志记录保留在内存中，而不是磁盘上</td> </tr> <tr> <td>OFF</td> <td>不保留任何日志记录</td> </tr> </tbody> </table> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PRAGMA <span class="nv">journal_mode</span><span class="o">=</span>WAL<span class="p">;</span>
</code></pre></div></div> <h2 id="磁盘同步模式">磁盘同步模式</h2> <p>设定当前磁盘同步模式，该模式控制 SQLite 如何将数据写入物理磁盘</p> <table> <thead> <tr> <th>Pragma</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>0/OFF</td> <td>不进行同步</td> </tr> <tr> <td>1/NORMAL</td> <td>在关键的磁盘操作的每个序列后同步</td> </tr> <tr> <td>2/FULL</td> <td>在每个关键的磁盘操作后同步</td> </tr> </tbody> </table> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PRAGMA <span class="nv">synchronous</span><span class="o">=</span>NORMAL
</code></pre></div></div>]]></content><author><name></name></author><category term="Database"/><category term="SQLite"/><summary type="html"><![CDATA[日志模式]]></summary></entry><entry><title type="html">Django Q2 启动 Multiple Queues</title><link href="https://quaner-dev.github.io/blog/2025/Django-Q2%E5%90%AF%E5%8A%A8Multiple-Queues/" rel="alternate" type="text/html" title="Django Q2 启动 Multiple Queues"/><published>2025-04-16T00:00:00+00:00</published><updated>2025-04-16T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Django%20Q2%E5%90%AF%E5%8A%A8Multiple%20Queues</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Django-Q2%E5%90%AF%E5%8A%A8Multiple-Queues/"><![CDATA[<h2 id="settingpy-中增加-alt_clusters-相关配置">setting.py 中增加 ALT_CLUSTERS 相关配置</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Q_CLUSTER</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">myproject</span><span class="sh">'</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">workers</span><span class="sh">'</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">recycle</span><span class="sh">'</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">timeout</span><span class="sh">'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">compress</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">save_limit</span><span class="sh">'</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">queue_limit</span><span class="sh">'</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">cpu_affinity</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">label</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Django Q2</span><span class="sh">'</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">redis</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">host</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">127.0.0.1</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">port</span><span class="sh">'</span><span class="p">:</span> <span class="mi">6379</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">db</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="p">},</span>
    <span class="sh">'</span><span class="s">ALT_CLUSTERS</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">long</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">timeout</span><span class="sh">'</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">retry</span><span class="sh">'</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">max_attempts</span><span class="sh">'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="sh">'</span><span class="s">short</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">timeout</span><span class="sh">'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">max_attempts</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="启动-long-队列">启动 long 队列</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">Q_CLUSTER_NAME</span><span class="o">=</span>long python manage.py qcluster
</code></pre></div></div>]]></content><author><name></name></author><category term="Django"/><category term="Django"/><category term="Django-Q2"/><summary type="html"><![CDATA[setting.py 中增加 ALT_CLUSTERS 相关配置]]></summary></entry><entry><title type="html">Ubuntu 防止合笔记本后挂起</title><link href="https://quaner-dev.github.io/blog/2025/Ubuntu%E9%98%B2%E6%AD%A2%E5%90%88%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%90%8E%E6%8C%82%E8%B5%B7/" rel="alternate" type="text/html" title="Ubuntu 防止合笔记本后挂起"/><published>2025-04-16T00:00:00+00:00</published><updated>2025-04-16T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Ubuntu%E9%98%B2%E6%AD%A2%E5%90%88%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%90%8E%E6%8C%82%E8%B5%B7</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Ubuntu%E9%98%B2%E6%AD%A2%E5%90%88%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%90%8E%E6%8C%82%E8%B5%B7/"><![CDATA[<h2 id="编辑-logindconf">编辑 logind.conf</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/systemd/logind.conf
</code></pre></div></div> <h2 id="将以下参数修改为-ignore">将以下参数修改为 ignore</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">HandleLidSwitch</span><span class="o">=</span>ignore
<span class="nv">HandleLidSwitchExternalPower</span><span class="o">=</span>ignore
<span class="nv">HandleLidSwitchDocked</span><span class="o">=</span>ignore
</code></pre></div></div> <h2 id="重启-systemd-logind-服务">重启 systemd-logind 服务</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart systemd-logind
</code></pre></div></div>]]></content><author><name></name></author><category term="Ubuntu"/><category term="Systemd"/><summary type="html"><![CDATA[编辑 logind.conf]]></summary></entry><entry><title type="html">Ubuntu 永久修改 DNS</title><link href="https://quaner-dev.github.io/blog/2025/Ubuntu%E6%B0%B8%E4%B9%85%E4%BF%AE%E6%94%B9DNS/" rel="alternate" type="text/html" title="Ubuntu 永久修改 DNS"/><published>2025-04-11T00:00:00+00:00</published><updated>2025-04-11T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Ubuntu%E6%B0%B8%E4%B9%85%E4%BF%AE%E6%94%B9DNS</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Ubuntu%E6%B0%B8%E4%B9%85%E4%BF%AE%E6%94%B9DNS/"><![CDATA[<h2 id="修改-systemd-resolved-配置">修改 systemd-resolved 配置</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/systemd/resolved.conf
</code></pre></div></div> <p>取消注释并修改以下行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Copy
<span class="o">[</span>Resolve]
<span class="nv">DNS</span><span class="o">=</span>1.1.1.1 223.5.5.5 <span class="c"># 指定 DNS 服务器（多个用空格分隔）。</span>
<span class="nv">Domains</span><span class="o">=</span>~. <span class="c"># 表示所有域名查询都使用这些 DNS。</span>
</code></pre></div></div> <h2 id="重启-systemd-resolved">重启 systemd-resolved</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart systemd-resolved
</code></pre></div></div> <h2 id="验证-dns">验证 DNS</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resolvectl status
</code></pre></div></div>]]></content><author><name></name></author><category term="Ubuntu"/><category term="DNS"/><summary type="html"><![CDATA[修改 systemd-resolved 配置 sudo nano /etc/systemd/resolved.conf 取消注释并修改以下行： Copy [Resolve] DNS=1.1.1.1 223.5.5.5 # 指定 DNS 服务器（多个用空格分隔）。 Domains=~. # 表示所有域名查询都使用这些 DNS。 重启 systemd-resolved sudo systemctl restart systemd-resolved 验证 DNS resolvectl status]]></summary></entry><entry><title type="html">Docker数据迁移方案</title><link href="https://quaner-dev.github.io/blog/2025/Docker%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88/" rel="alternate" type="text/html" title="Docker数据迁移方案"/><published>2025-04-10T00:00:00+00:00</published><updated>2025-04-10T00:00:00+00:00</updated><id>https://quaner-dev.github.io/blog/2025/Docker%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88</id><content type="html" xml:base="https://quaner-dev.github.io/blog/2025/Docker%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88/"><![CDATA[<h2 id="停止-k8s-服务">停止 k8s 服务</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl stop kubelet
systemctl stop docker
</code></pre></div></div> <h2 id="同步文件夹到执行磁盘下">同步文件夹到执行磁盘下</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rsync <span class="nt">-avP</span> fse-sata /arachnid
</code></pre></div></div> <h2 id="启动-k8s">启动 k8s</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start docker
systemctl start kubelet
</code></pre></div></div>]]></content><author><name></name></author><category term="Docker"/><category term="Backup"/><category term="Recovery"/><summary type="html"><![CDATA[停止 k8s 服务 systemctl stop kubelet systemctl stop docker 同步文件夹到执行磁盘下 rsync -avP fse-sata /arachnid 启动 k8s systemctl start docker systemctl start kubelet]]></summary></entry></feed>